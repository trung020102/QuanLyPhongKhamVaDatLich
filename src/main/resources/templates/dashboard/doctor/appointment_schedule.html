<html lang="vi"

      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/dashboard/layout/app">
>
<head>

    <link rel="stylesheet" href="/dashboard/css/appointment_schedule.css"/>
    <title>Calendar_work</title>>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!--    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</head>
<th:block layout:fragment="content-header">
    <div class="col-sm-6 centered-heading" >
        <h2>Quản lí ca khám </h2>
    </div>
    <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active">Quản lí ca khám </li>
        </ol>
    </div>
</th:block>

<th:block layout:fragment="content-body" class="appoinment-body">
    <div class="appoinment-main">


        <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
            <!--body-->
            <div class="container">
                <label class="col-sm-12 appoinment-search-label"> Time :</label>

                <form action="/doctor/appointments" method="GET">
                    <div class=" row appoinment-search" >

                        <div class="input-appoinment-search">
                            <input id="txtSearch" name="keyword" class="form-control" type="date"  placeholder="Nhập ngày cần tìm">

                        </div>

                        <button type="submit"> Tìm kiếm</button>

                    </div>
                </form>
<!--                <form th:action="@{/doctor/appointments}">-->
<!--                    <div class=" row appoinment-search" >-->

<!--                        <div class="input-appoinment-search">-->
<!--                            <input id="txtSearch" name="keyword" class="form-control" type="date"  placeholder="Nhập ngày cần tìm">-->

<!--                        </div>-->

<!--                        <button type="submit"> Tìm kiếm</button>-->

<!--                    </div>-->
<!--                </form>-->


                <hr class="row">

                <div class="row appoinment-info">
                    <div class="table table-bordered table-container">

                        <div th:if="${error}">
                            <p th:text="${error}"></p>
                        </div>
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th scope="col">Time</th>
                                <th scope="col">No</th>
                                <th scope="col">Name</th>
                                <th scope="col">Gender</th>
                                <th scope="col">Status</th>
                                <th scope="col">Action</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="app:${appointments}">
                                <th scope="row" th:text="${app.getTimeSlot()}">8:00-9:00</th>
                                <td th:text="${app.getOrderNumber()}">001</td>
                                <td th:text="${app.getPatient().getName()}">Otto</td>
                                <td th:text="${app.getPatient().getGender()}">Male</td>

                                <td style="display: none;" class="appointment-phone" th:text="${app.getPatient().getPhoneNumber()}"></td>
                                <td style="display: none;" class="appointment-email" th:text="${app.getUser().getEmail()}">Otto</td>
                                <td style="display: none;" class="appointment-date" th:text="${#dates.format(app.getAppointmentDate(), 'dd-MM-yyyy')}"></td>
                                <td style="display: none;" class="appointment-timeSlot" th:text="${app.getTimeSlot()}"></td>
                                <td style="display: none;" class="appointment-address" th:text="${app.getPatient().getAddress()}">Otto</td>
                                <td style="display: none;" class="appointment-record" th:text="${app.getPatient().getAddress()}"></td>
                                <td style="display: none;" class="appointment-descriptine" th:text="${app.getPatient()}"></td>

                                <td  style="font-weight: bold;" th:if="${app.appointmentStatus != null}">
                                    <span class="hover-underline" th:text="${app.appointmentStatus.getStatusName()}"
                                         th:style="'color:' + (${app.appointmentStatus.getStatusName()} == 'Scheduled' ? '#F9AA33' : (${app.appointmentStatus.getStatusName()} == 'Completed' ? 'green' : (${app.appointmentStatus.getStatusName()} == 'Canceled' ? 'red' : 'black')))">

                                     </span>
                                </td>
                                <td>
                                    <!-- Detail button -->
                                    <button class="button-detail openModalBtn detailBtn" data-id="[[${app.getId()}]]">Detail</button>
                                    <!-- Send Invoice button -->
                                    <button class="button-send openModalSendBtn" data-id="[[${app.getId()}]]">Send The Invoice <i class="fa fa-check-circle"></i></button>

                                    <button class="button-create" data-id="[[${app.getId()}]]"> <i class="fa fa-plus-circle"></i></button>
                                    <!-- Delete button -->
                                    <a
                                            onclick="return confirm('Are you sure you want to delete this Appointment ?')"
                                            th:href="'/doctor/appointments/delete/' + ${app.getId()}">
                                        <i class="fa fa-trash"></i>
                                    </a>



                                    <!--                                    <button class="button-detail openModalBtn detailBtn"><a th:href="'/doctor/appointments/' + ${app.getId()}">Detail</a></button>-->
<!--                                    <button class="button-send openModalSendBtn" data-id="[[${app.getId()}]]">Send The Invoice <i class="fa fa-check-circle"></i></button>-->
<!--                                    &lt;!&ndash;<a (click)="delete(row.userId, row.name)"><i class="fa fa-trash"></i></a>&ndash;&gt;-->
<!--                                    <a href="#" onclick="confirmDelete('[[${app.getId()}]]', '[[${app.getPatient().getName()}]]')"><i class="fa fa-trash"></i></a>-->
                                </td>
                                <!-- The Modal -->
                                <div id="myModal" class="modal" >
                                    <!-- Modal content -->
                                    <div class="modal-content">
                                        <span class="close">&times;</span>
                                        <p class="modal-title">Thông tin bệnh nhân</p>
                                        <div class="modal-content-body" >
                                            <hr>
                                            <div class="input-row">
                                                <div class="input-container">
                                                    <label for="name">Tên :</label>
                                                    <input class="form-control" type="text" id="name" name="name"  readonly >
                                                </div>
                                                <div class="input-container">
                                                    <label for="phone">Số điện thoại :</label>
                                                    <input class="form-control" type="text" id="phone" name="phone" readonly >
                                                </div>
                                                <div class="input-container">
                                                    <label for="email">Email :</label>
                                                    <input class="form-control" type="email" id="email" name="email"  readonly >
                                                </div>
                                            </div>

                                            <div class="input-row">
                                                <div class="input-container">
                                                    <div class="input-list">
                                                        <div class="input-item">
                                                            <label for="date">Ngày :</label>
                                                            <input class="form-control" id="date" name="date" style="width: 90%" type="text"  readonly>
                                                        </div>
                                                        <div class="input-item">
                                                            <label for="slotTime">Thời gian :</label>
                                                            <input class="form-control" id="slotTime" name="slotTime" style="width: 90%" type="text"  readonly>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="input-container">
                                                    <label for="symptoms">Triệu chứng :</label>
                                                    <textarea id="symptoms" name="symptoms" class="form-control"  readonly> Đau đàu, ho , sổ mũi...</textarea>
                                                </div>
                                                <div class="input-container">
                                                    <label for="address">Địa chỉ :</label>
                                                    <textarea id="address" name="address" class="form-control"  readonly>sakurai,Tokyo</textarea>
                                                </div>
                                            </div>
                                            <div class="input-row">

                                                <div class="input-container">
                                                    <label for="diagnosis">Ghi chú (tiểu sự bệnh án) :</label>
                                                    <textarea id="diagnosis" name="diagnosis" class="form-control"  readonly style="height: 100%"></textarea>
                                                </div>
                                            </div>
                                            <div class="button-container">
                                                <button id="okBtn">OK</button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </tr>
<!--                            <tr>-->
<!--                                 <th scope="row">10:00-11:00</th>-->
<!--                                <td>002</td>-->
<!--                                <td>Thornton</td>-->
<!--                                <td>Female</td>-->
<!--                                <td>-->
<!--                                    <button  class="button-detail openModalBtn">Detail</button>-->
<!--                                    <button class="button-send openModalSendBtn">Send The Invoice  <i class="fa fa-check-circle"></i></button>-->
<!--                                    <a href="#" onclick="confirmDelete('001', 'Otto')"><i class="fa fa-trash"></i></a>-->
<!--                                </td>-->
<!--                            </tr>-->
<!--                            <tr>-->
<!--                                <th scope="row">13:00-15:00</th>-->
<!--                                <td>003</td>-->
<!--                                <td>Thornton</td>-->
<!--                                <td>Female</td>-->
<!--                                <td>-->
<!--                                    <button class="button-detail openModalBtn">Detail</button>-->
<!--                                    <button class="button-send openModalSendBtn">Send The Invoice <i style="color: #F9AA33" class="fa fa-exclamation-circle"></i></button>-->
<!--                                    <a href="#" onclick="confirmDelete('001', 'Otto')"><i class="fa fa-trash"></i></a>-->
<!--                                </td>-->
<!--                            </tr>-->
                            </tbody>
                        </table>

                    </div>

                </div>


            </div>
        </div>



    </div>



<!--   modal send -->
    <!-- The Modal -->
    <div id="sendModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="send-close">&times;</span>
            <p class="modal-title">Gửi thông tin cho bệnh nhân.</p>
            <div class="modal-content-body">
                <hr>
                <div class="input-row">

                    <div class="input-container">
                        <label for="gmail">Email :</label>
                        <input class="form-control mail-input" type="email" id="gmail" name="gmail">
                    </div>

                    <div class="input-container">
                        <label for="file">Chọn file :</label>
                        <input type="file" id="file" name="file">
                    </div>
                </div>

                <!-- Button Send và Cancel -->
                <div class="button-container">
                    <button id="sendBtn">Send</button>
                    <button id="cancelBtn">Cancel</button>
                </div>
            </div>

        </div>
    </div>
    <div class="panel-footer" >
        <!-- phan trang -->
        <nav aria-label="Page navigation">
            <p style="font-size: 10px">Total Items: [[${totalItems}]] : Page [[${currentPage}]] of [[${totalPages}]]</p>
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
                    <a class="page-link" th:if="${currentPage > 1}" th:href="@{/doctor/appointments/page/1}">First</a>
                    <a class="page-link" th:unless="${currentPage > 1}" style="background-color: #0c84ff; color: #FFFFFF;">First</a>
                </li>
                <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
                    <a class="page-link" th:if="${currentPage > 1}" th:href="@{'/doctor/appointments/page/' + ${currentPage - 1}}">Previous</a>
                    <a class="page-link" th:unless="${currentPage > 1}" style="background-color: #0c84ff; color: #FFFFFF;">Previous</a>
                </li>
                <li th:each="i : ${#numbers.sequence(1, totalPages)}" class="page-item" th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:if="${i != currentPage}" th:href="@{'/doctor/appointments/page/' + ${i}}">[[${i}]]</a>
                    <a class="page-link" th:unless="${i != currentPage}" style="background-color: #0c84ff; color: #FFFFFF;">[[${i}]]</a>
                </li>
                <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
                    <a class="page-link" th:if="${currentPage < totalPages}" th:href="@{'/doctor/appointments/page/' + ${currentPage + 1}}">Next</a>
                    <a class="page-link" th:unless="${currentPage < totalPages}" style="background-color: #0c84ff; color: #FFFFFF;">Next</a>
                </li>
                <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
                    <a class="page-link" th:if="${currentPage < totalPages}" th:href="@{'/doctor/appointments/page/' + ${totalPages}}">Last</a>
                    <a class="page-link" th:unless="${currentPage < totalPages}" style="background-color: #0c84ff; color: #FFFFFF;">Last</a>
                </li>
            </ul>
        </nav>
    </div>
</th:block>




<th:block layout:fragment="document-script">
    <script src="/js/document.js"></script>

</th:block>


<th:block layout:fragment="service-script">

    <script src="/dashboard/js/appointment_schedule.js"></script>
</th:block>
</html>
